import{c as $,r as t,u as i,j as e,a as D,H as E,X as F}from"./index-L5qlGLpf.js";import{s as n,m as u,B as f,A as I}from"./supabaseClient-DQzvhkAx.js";import{L as C}from"./Layout-DBUk0RNB.js";import{I as o}from"./input-BFLFz7Wl.js";import{L as m}from"./label-ChehKa78.js";import{S as O,b as H,c as B,d as R,e as p}from"./select-P3hUg8fy.js";import{S as U,P as V,T as M}from"./CartDrawer-BNY1Fyqk.js";import{P as z}from"./package-DsUmbxvG.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=$("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),se=()=>{const[x,P]=t.useState("dashboard"),[A,b]=t.useState(!0),[g,k]=t.useState({revenue:0,orders:0,products:0}),[v,N]=t.useState([]),[j,y]=t.useState([]),[h,w]=t.useState(!1),[a,c]=t.useState({name:"",price:"",category:"Apparel",image:"",description:""});t.useEffect(()=>{S()},[]);const S=async()=>{try{b(!0);const{data:s}=await n.from("products").select("*").order("created_at",{ascending:!1}),{data:r}=await n.from("orders").select("*").order("created_at",{ascending:!1});s&&N(s),r&&y(r);const d=(r==null?void 0:r.reduce((l,_)=>l+Number(_.total_amount),0))||0;k({revenue:d,orders:(r==null?void 0:r.length)||0,products:(s==null?void 0:s.length)||0})}catch{i.error("Error loading admin data")}finally{b(!1)}},q=async s=>{s.preventDefault();try{const{error:r}=await n.from("products").insert([{name:a.name,price:Number(a.price),category:a.category,image:a.image,description:a.description,is_featured:!0}]);if(r)throw r;i.success("Product created!"),w(!1),c({name:"",price:"",category:"Apparel",image:"",description:""}),S()}catch(r){i.error("Failed to add product: "+r.message)}},L=async s=>{if(confirm("Are you sure you want to delete this product?"))try{const{error:r}=await n.from("products").delete().eq("id",s);if(r)throw r;i.success("Product deleted"),N(v.filter(d=>d.id!==s))}catch(r){i.error("Error deleting: "+r.message)}},T=async(s,r)=>{try{const{error:d}=await n.from("orders").update({status:r}).eq("id",s);if(d)throw d;i.success(`Order #${s} marked as ${r}`),y(j.map(l=>l.id===s?{...l,status:r}:l))}catch{i.error("Failed to update status")}};return A?e.jsx(C,{children:e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx(D,{className:"w-8 h-8 animate-spin text-primary"})})}):e.jsxs(C,{children:[e.jsx(E,{children:e.jsx("title",{children:"Admin Dashboard"})}),e.jsxs("div",{className:"container mx-auto px-4 py-12 min-h-screen",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsx("h1",{className:"font-display text-3xl font-bold",children:"Admin Control"}),e.jsx("div",{className:"flex bg-white/5 p-1 rounded-xl border border-white/10",children:["dashboard","products","orders"].map(s=>e.jsx("button",{onClick:()=>P(s),className:`px-6 py-2 rounded-lg text-sm font-medium transition-all ${x===s?"bg-primary text-white shadow-lg":"text-muted-foreground hover:text-white"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),x==="dashboard"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-card border border-white/5 shadow-lg flex items-center gap-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-green-500/10 text-green-500",children:e.jsx(X,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Revenue"}),e.jsxs("h3",{className:"text-2xl font-bold",children:["$",g.revenue.toFixed(2)]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-card border border-white/5 shadow-lg flex items-center gap-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-blue-500/10 text-blue-500",children:e.jsx(U,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Orders"}),e.jsx("h3",{className:"text-2xl font-bold",children:g.orders})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-card border border-white/5 shadow-lg flex items-center gap-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-purple-500/10 text-purple-500",children:e.jsx(z,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Products"}),e.jsx("h3",{className:"text-2xl font-bold",children:g.products})]})]})]}),x==="products"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Inventory"}),e.jsx(f,{onClick:()=>w(!h),className:h?"bg-red-500 hover:bg-red-600":"",children:h?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"})," Cancel"]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4"})," Add Product"]})})]}),e.jsx(I,{children:h&&e.jsxs(u.form,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},onSubmit:q,className:"bg-white/5 border border-white/10 p-6 rounded-2xl mb-8 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[e.jsxs("div",{children:[e.jsx(m,{children:"Name"}),e.jsx(o,{required:!0,value:a.name,onChange:s=>c({...a,name:s.target.value}),className:"bg-black/20"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Price ($)"}),e.jsx(o,{type:"number",required:!0,value:a.price,onChange:s=>c({...a,price:s.target.value}),className:"bg-black/20"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Category"}),e.jsx(o,{required:!0,value:a.category,onChange:s=>c({...a,category:s.target.value}),className:"bg-black/20"})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Image URL"}),e.jsx(o,{required:!0,placeholder:"https://...",value:a.image,onChange:s=>c({...a,image:s.target.value}),className:"bg-black/20"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(m,{children:"Description"}),e.jsx(o,{required:!0,value:a.description,onChange:s=>c({...a,description:s.target.value}),className:"bg-black/20"})]})]}),e.jsx(f,{type:"submit",className:"w-full",children:"Save Product"})]})}),e.jsx("div",{className:"space-y-4",children:v.map(s=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-card border border-white/5 rounded-xl hover:border-white/10 transition-colors",children:[e.jsx("img",{src:s.image,className:"w-12 h-12 rounded-lg object-cover bg-white/10"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",s.price]})]}),e.jsx("div",{className:"px-3 py-1 rounded-full bg-white/5 text-xs",children:s.category}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>L(s.id),className:"text-red-400 hover:text-red-300 hover:bg-red-400/10",children:e.jsx(M,{className:"h-4 w-4"})})]},s.id))})]}),x==="orders"&&e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Order Management"}),e.jsx("div",{className:"space-y-4",children:j.length===0?e.jsx("p",{className:"text-muted-foreground",children:"No orders yet."}):j.map(s=>e.jsxs("div",{className:"p-6 bg-card border border-white/5 rounded-2xl flex flex-col md:flex-row justify-between gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-bold text-lg",children:["Order #",s.id]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Customer:"," ",e.jsx("span",{className:"text-foreground",children:s.customer_name})]}),e.jsxs("p",{className:"text-muted-foreground",children:["Total:"," ",e.jsxs("span",{className:"text-green-400 font-medium",children:["$",s.total_amount]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(O,{defaultValue:s.status,onValueChange:r=>T(s.id,r),children:[e.jsx(H,{className:"w-[140px] bg-white/5 border-white/10",children:e.jsx(B,{})}),e.jsxs(R,{children:[e.jsx(p,{value:"pending",children:"Pending"}),e.jsx(p,{value:"shipped",children:"Shipped"}),e.jsx(p,{value:"delivered",children:"Delivered"}),e.jsx(p,{value:"cancelled",children:"Cancelled"})]})]})})]},s.id))})]})]})]})};export{se as default};
