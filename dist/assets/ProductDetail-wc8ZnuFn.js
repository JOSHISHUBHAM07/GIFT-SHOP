import{p as v,r as a,j as e,a as N,L as m,u}from"./index-L5qlGLpf.js";import{L as c}from"./Layout-DBUk0RNB.js";import{u as w,M as C,P,S}from"./CartDrawer-BNY1Fyqk.js";import{B as x,m as h,s as k}from"./supabaseClient-DQzvhkAx.js";import{C as L}from"./chevron-left-CEsZ4Lps.js";const Q=()=>{const{id:i}=v(),[t,f]=a.useState(null),[p,l]=a.useState(!0),[s,d]=a.useState(1),{addItem:g,updateQuantity:j,items:y}=w();a.useEffect(()=>{(async()=>{if(!i)return;l(!0);const{data:n,error:r}=await k.from("products").select("*").eq("id",i).single();r?(console.error("Error fetching product:",r),u.error("Product not found")):f(n),l(!1)})()},[i]);const b=()=>{if(t){if(g({id:t.id,name:t.name,price:t.price,image:t.image,category:t.category}),s>1){const o=y.find(r=>r.id===t.id),n=o?o.quantity+(s-1):s;j(t.id,n)}u.success("Added to cart",{description:`${s}x ${t.name} is now in your bag.`})}};return p?e.jsx(c,{children:e.jsx("div",{className:"h-[80vh] flex items-center justify-center",children:e.jsx(N,{className:"w-8 h-8 animate-spin text-primary"})})}):t?e.jsx(c,{children:e.jsxs("div",{className:"container mx-auto px-4 py-12 md:py-20",children:[e.jsxs(m,{to:"/",className:"inline-flex items-center text-sm text-muted-foreground hover:text-primary mb-8 transition-colors group",children:[e.jsx(L,{className:"w-4 h-4 mr-1 transition-transform group-hover:-translate-x-1"}),"Back to Shop"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 lg:gap-20",children:[e.jsx(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"relative",children:e.jsxs("div",{className:"aspect-square bg-card/50 rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative group",children:[e.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex flex-col justify-center",children:[e.jsx("span",{className:"text-primary font-medium tracking-widest text-sm uppercase mb-3",children:t.category}),e.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold mb-4 leading-tight",children:t.name}),e.jsxs("p",{className:"text-3xl font-light text-foreground mb-6",children:["$",t.price.toFixed(2)]}),e.jsx("div",{className:"prose prose-invert text-muted-foreground mb-10 leading-relaxed",children:e.jsx("p",{children:t.description})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center bg-card border border-white/10 rounded-full h-14 w-fit px-2",children:[e.jsx("button",{onClick:()=>d(Math.max(1,s-1)),className:"w-10 h-10 flex items-center justify-center hover:bg-white/10 rounded-full transition-colors",disabled:s<=1,children:e.jsx(C,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-12 text-center font-medium text-lg",children:s}),e.jsx("button",{onClick:()=>d(s+1),className:"w-10 h-10 flex items-center justify-center hover:bg-white/10 rounded-full transition-colors",children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsxs(x,{size:"lg",className:"flex-1 btn-primary h-14 rounded-full text-base font-medium shadow-lg shadow-primary/20",onClick:b,children:[e.jsx(S,{className:"mr-2 w-5 h-5"}),"Add to Cart"]})]})]})]})]})}):e.jsx(c,{children:e.jsxs("div",{className:"h-[50vh] flex flex-col items-center justify-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Product not found"}),e.jsx(x,{asChild:!0,variant:"outline",children:e.jsx(m,{to:"/",children:"Return to Shop"})})]})})};export{Q as default};
