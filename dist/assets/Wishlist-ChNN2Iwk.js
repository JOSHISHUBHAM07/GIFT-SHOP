import{r as i,o as b,j as s,a as w,X as y,u as n}from"./index-L5qlGLpf.js";import{s as o,B as m,A as N,m as v}from"./supabaseClient-DQzvhkAx.js";import{L as u}from"./Layout-DBUk0RNB.js";import{u as S,H as h,S as C}from"./CartDrawer-BNY1Fyqk.js";const L=()=>{const[r,l]=i.useState([]),[x,c]=i.useState(!0),{addItem:p}=S(),f=b();i.useEffect(()=>{j()},[]);const j=async()=>{const{data:{session:e}}=await o.auth.getSession();if(!e){c(!1);return}try{const{data:t,error:a}=await o.from("wishlist").select("*, products(*)").eq("user_id",e.user.id);if(a)throw a;l(t||[])}catch(t){console.error("Error loading wishlist:",t)}finally{c(!1)}},d=async e=>{const{error:t}=await o.from("wishlist").delete().eq("id",e);t||(l(r.filter(a=>a.id!==e)),n.success("Removed from wishlist"))},g=e=>{p({...e.products,quantity:1}),n.success("Added to cart"),d(e.id)};return x?s.jsx(u,{children:s.jsx("div",{className:"h-[60vh] flex items-center justify-center",children:s.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})})}):s.jsx(u,{children:s.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-6xl",children:[s.jsxs("h1",{className:"font-display text-4xl font-bold mb-8 flex items-center gap-3",children:[s.jsx(h,{className:"h-8 w-8 text-primary fill-primary"}),"My Wishlist"]}),r.length===0?s.jsxs("div",{className:"text-center py-20 bg-white/5 rounded-3xl border border-white/10",children:[s.jsx(h,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4 opacity-50"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your wishlist is empty"}),s.jsx("p",{className:"text-muted-foreground mb-6",children:"Save items you love to revisit them later."}),s.jsx(m,{onClick:()=>f("/products"),children:"Start Shopping"})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s.jsx(N,{children:r.map(e=>s.jsxs(v.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-card border border-white/5 rounded-2xl overflow-hidden group",children:[s.jsxs("div",{className:"relative aspect-square",children:[s.jsx("img",{src:e.products.image,alt:e.products.name,className:"w-full h-full object-cover"}),s.jsx("button",{onClick:()=>d(e.id),className:"absolute top-3 right-3 p-2 bg-black/50 backdrop-blur rounded-full text-white hover:bg-red-500 transition-colors",children:s.jsx(y,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-medium truncate",children:e.products.name}),s.jsxs("p",{className:"text-primary font-semibold mb-4",children:["$",e.products.price]}),s.jsxs(m,{className:"w-full",onClick:()=>g(e),children:[s.jsx(C,{className:"mr-2 h-4 w-4"})," Add to Cart"]})]})]},e.id))})})]})})};export{L as default};
