import{c as f,o as j,r as t,j as e,a as g,u as y}from"./index-L5qlGLpf.js";import{s as i,B as l}from"./supabaseClient-DQzvhkAx.js";import{L as d}from"./Layout-DBUk0RNB.js";import{P as N}from"./package-DsUmbxvG.js";import"./CartDrawer-BNY1Fyqk.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=f("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),C=()=>{const a=j(),[r,o]=t.useState(null),[n,m]=t.useState([]),[x,u]=t.useState(!0);t.useEffect(()=>{h()},[]);const h=async()=>{const{data:{session:s}}=await i.auth.getSession();if(!s){a("/auth");return}o(s.user);const{data:c,error:v}=await i.from("orders").select("*").eq("email",s.user.email).order("created_at",{ascending:!1});c&&m(c),u(!1)},p=async()=>{await i.auth.signOut(),a("/"),y.success("Signed out successfully")};return x?e.jsx(d,{children:e.jsx("div",{className:"h-[60vh] flex items-center justify-center",children:e.jsx(g,{className:"animate-spin"})})}):e.jsx(d,{children:e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-3xl font-bold",children:"My Account"}),e.jsx("p",{className:"text-muted-foreground",children:r==null?void 0:r.email})]}),e.jsxs(l,{variant:"outline",onClick:p,className:"gap-2",children:[e.jsx(b,{className:"w-4 h-4"})," Sign Out"]})]}),e.jsxs("div",{className:"bg-card/50 border border-white/5 rounded-2xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-primary"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Order History"})]}),e.jsx("div",{className:"divide-y divide-white/5",children:n.length===0?e.jsxs("div",{className:"p-12 text-center text-muted-foreground",children:[e.jsx("p",{children:"No orders found."}),e.jsx(l,{variant:"link",onClick:()=>a("/"),className:"text-primary mt-2",children:"Start Shopping"})]}):n.map(s=>e.jsxs("div",{className:"p-6 flex flex-col md:flex-row justify-between md:items-center gap-4 hover:bg-white/5 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-lg",children:["Order #",s.id]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-medium border border-primary/20",children:s.status}),e.jsxs("p",{className:"font-bold text-lg",children:["$",s.total_amount]})]})]},s.id))})]})]})})};export{C as default};
